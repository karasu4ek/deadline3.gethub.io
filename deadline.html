<!doctype html>
<html lang="ru">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>–ö–∞–∑–∏–Ω–æ (–¥–µ–º–æ) ‚Äî –í–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ –º–æ–Ω–µ—Ç—ã</title>
<style>
  :root{
    --bg:#0f1724;
    --card:#0b1220;
    --accent:#ffd166;
    --muted:#9aa8bf;
    --glass: rgba(255,255,255,0.03);
    --good:#2dd4bf;
    --bad:#ff6b6b;
    font-family: Inter, system-ui, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  }
  html,body{height:100%;margin:0;background:linear-gradient(180deg,#071029 0%, #071322 60%); color:#e6eef8;}
  .wrap{max-width:980px;margin:28px auto;padding:20px;}
  header{display:flex;align-items:center;justify-content:space-between;margin-bottom:16px}
  .brand{display:flex;gap:12px;align-items:center}
  .logo {width:58px;height:58px;border-radius:10px;background:linear-gradient(135deg,#ff9f1c,#ff3d71);display:flex;align-items:center;justify-content:center;font-weight:700;color:#0b1220}
  h1{font-size:20px;margin:0}
  .top-actions{display:flex;gap:10px;align-items:center}
  .btn{background:var(--card);border:1px solid rgba(255,255,255,0.04);padding:8px 12px;border-radius:8px;color:var(--accent);cursor:pointer}
  .btn.secondary{color:var(--muted);background:var(--glass)}
  .balance{background:linear-gradient(90deg,#042a2a,#08303c);padding:10px 14px;border-radius:10px;color:#c7fff2;font-weight:600}
  main{display:grid;grid-template-columns:280px 1fr;gap:18px}
  nav{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));padding:12px;border-radius:12px}
  .menu-btn{display:block;width:100%;text-align:left;padding:10px;border-radius:8px;color:var(--muted);background:transparent;border:none;cursor:pointer;margin-bottom:8px}
  .menu-btn.active{background:rgba(255,255,255,0.02);color:#fff;font-weight:600}
  section.card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));padding:14px;border-radius:12px;min-height:320px}
  .center{display:flex;align-items:center;justify-content:center}
  .reels{display:flex;gap:8px;justify-content:center;margin:14px 0}
  .reel{width:72px;height:72px;border-radius:10px;background:#071226;display:flex;align-items:center;justify-content:center;font-size:30px;border:1px solid rgba(255,255,255,0.03)}
  .log{max-height:220px;overflow:auto;padding:8px;background:rgba(0,0,0,0.12);border-radius:8px;color:var(--muted);font-size:14px}
  .controls{display:flex;gap:8px;flex-wrap:wrap;margin-top:10px}
  input[type="number"]{padding:8px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:inherit;width:120px}
  .small{font-size:13px;color:var(--muted)}
  .wheel{width:220px;height:220px;border-radius:50%;background:conic-gradient(#0f3 0 30deg,#0fa 30deg 60deg,#0ab 60deg 90deg,#1f6 90deg 120deg,#19a 120deg 150deg,#0a6 150deg 180deg,#06a 180deg 210deg,#0a9 210deg 240deg,#1bd 240deg 270deg,#06a 270deg 300deg,#0c6 300deg 330deg,#0f6 330deg 360deg);display:flex;align-items:center;justify-content:center;position:relative}
  .wheel::after{content:"";position:absolute;inset:8px;border-radius:50%;background:rgba(0,0,0,0.6)}
  .wheel-pointer{width:0;height:0;border-left:10px solid transparent;border-right:10px solid transparent;border-bottom:20px solid var(--accent);position:absolute;top:-10px;left:calc(50% - 10px)}
  .row{display:flex;gap:10px}
  .card-title{font-weight:700;margin-bottom:8px}
  .bj-hand{display:flex;gap:8px;flex-wrap:wrap}
  .chip{background:linear-gradient(90deg,#ff9f1c,#ffd166);padding:6px 10px;border-radius:50px;color:#071226;font-weight:700}
  footer{text-align:center;color:var(--muted);margin-top:16px;font-size:13px}
  /* responsive */
  @media (max-width:880px){
    main{grid-template-columns:1fr; }
  }
</style>
</head>
<body>
<div class="wrap">
  <header>
    <div class="brand">
      <div class="logo">CZ</div>
      <div>
        <h1>–î–µ–º–æ-–ö–∞–∑–∏–Ω–æ ‚Äî –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ –º–æ–Ω–µ—Ç—ã</h1>
        <div class="small">–ò–≥—Ä—ã: —Å–ª–æ—Ç, —Ä—É–ª–µ—Ç–∫–∞, –∫–æ–ª–µ—Å–æ —Ñ–æ—Ä—Ç—É–Ω—ã, –±–ª—ç–∫–¥–∂–µ–∫. –¢–æ–ª—å–∫–æ –¥–ª—è —Ä–∞–∑–≤–ª–µ—á–µ–Ω–∏—è.</div>
      </div>
    </div>

    <div class="top-actions">

castle, [27.11.2025 22:07]
<div class="balance">–ë–∞–ª–∞–Ω—Å: <span id="balance">0</span> <span class="chip">‚óè</span></div>
      <button id="profileBtn" class="btn secondary">–ü—Ä–æ—Ñ–∏–ª—å</button>
    </div>
  </header>

  <main>
    <nav>
      <button class="menu-btn active" data-target="slot">üé∞ –°–ª–æ—Ç</button>
      <button class="menu-btn" data-target="roulette">üé≤ –†—É–ª–µ—Ç–∫–∞</button>
      <button class="menu-btn" data-target="wheel">üé° –ö–æ–ª–µ—Å–æ —Ñ–æ—Ä—Ç—É–Ω—ã</button>
      <button class="menu-btn" data-target="blackjack">üÉè –ë–ª—ç–∫–¥–∂–µ–∫</button>
      <button class="menu-btn" data-target="daily">üéÅ –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –±–æ–Ω—É—Å</button>
      <button class="menu-btn" data-target="log">üìú –ò—Å—Ç–æ—Ä–∏—è</button>
    </nav>

    <section>
      <!-- SLOT -->
      <div id="slot" class="card">
        <div class="card-title">üé∞ –°–ª–æ—Ç</div>
        <div class="center">
          <div class="reels" id="slotReels">
            <div class="reel" id="r1">‚Äì</div>
            <div class="reel" id="r2">‚Äì</div>
            <div class="reel" id="r3">‚Äì</div>
          </div>
        </div>
        <div class="controls">
          <input id="slotBet" type="number" min="1" value="10" />
          <button id="spinBtn" class="btn">–ö—Ä—É—Ç–∏—Ç—å</button>
          <div class="small">–¢—Ä–∏ –≤ —Ä—è–¥ ‚Äî –∫—Ä—É–ø–Ω—ã–π –≤—ã–∏–≥—Ä—ã—à. –î–≤–µ –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ ‚Äî —á–∞—Å—Ç–∏—á–Ω—ã–π –≤–æ–∑–≤—Ä–∞—Ç.</div>
        </div>
      </div>

      <!-- ROULETTE -->
      <div id="roulette" class="card" style="display:none">
        <div class="card-title">üé≤ –†—É–ª–µ—Ç–∫–∞ (–∫—Ä–∞—Å–Ω–æ–µ / —á—ë—Ä–Ω–æ–µ)</div>
        <div class="row" style="align-items:center;margin-bottom:8px">
          <input id="rouletteBet" type="number" min="1" value="10" />
          <button class="btn" id="betRed">–°—Ç–∞–≤–∫–∞: –ö—Ä–∞—Å–Ω–æ–µ</button>
          <button class="btn" id="betBlack">–°—Ç–∞–≤–∫–∞: –ß—ë—Ä–Ω–æ–µ</button>
        </div>
        <div id="rouletteResult" class="small">–°–¥–µ–ª–∞–π—Ç–µ —Å—Ç–∞–≤–∫—É.</div>
      </div>

      <!-- WHEEL -->
      <div id="wheel" class="card" style="display:none">
        <div class="card-title">üé° –ö–æ–ª–µ—Å–æ —Ñ–æ—Ä—Ç—É–Ω—ã</div>
        <div style="display:flex;gap:20px;align-items:center;flex-wrap:wrap">
          <div style="position:relative">
            <div class="wheel" id="wheelDisc"></div>
            <div class="wheel-pointer"></div>
          </div>
          <div style="min-width:260px">
            <div class="small">–°–µ–∫—Ç–æ—Ä–∞: –º–Ω–æ–∂–∏—Ç–µ–ª–∏ √ó0,√ó1,√ó2,√ó3,√ó5,√ó10</div>
            <div style="margin-top:10px" class="row">
              <input id="wheelBet" type="number" min="1" value="10" />
              <button class="btn" id="wheelSpin">–ö—Ä—É—Ç–∏—Ç—å –∫–æ–ª–µ—Å–æ</button>
            </div>
            <div id="wheelResult" class="small" style="margin-top:10px">–°–¥–µ–ª–∞–π—Ç–µ —Å—Ç–∞–≤–∫—É –∏ –∫—Ä—É—Ç–∏—Ç–µ.</div>
          </div>
        </div>
      </div>

      <!-- BLACKJACK -->
      <div id="blackjack" class="card" style="display:none">
        <div class="card-title">üÉè –ë–ª—ç–∫–¥–∂–µ–∫</div>
        <div class="small">–ü—Ä–∞–≤–∏–ª–∞: —Ü–µ–ª—å ‚Äî 21. –ë–ª—ç–∫–¥–∂–µ–∫ (21 –∏–∑ 2 –∫–∞—Ä—Ç) –ø–ª–∞—Ç–∏—Ç √ó2.5. –ù–∏—á—å—è ‚Äî –≤–æ–∑–≤—Ä–∞—Ç.</div>
        <div style="margin-top:10px" class="row">
          <input id="bjBet" type="number" min="1" value="20" />
          <button class="btn" id="bjStart">–ù–∞—á–∞—Ç—å –∏–≥—Ä—É</button>
          <button class="btn" id="bjHit" style="display:none">–í–∑—è—Ç—å</button>
          <button class="btn" id="bjStand" style="display:none">–•–≤–∞—Ç–∏—Ç</button>
        </div>
        <div style="margin-top:14px">
          <div><strong>–ò–≥—Ä–æ–∫:</strong> <span id="bjPlayer" class="bj-hand">‚Äî</span> <span id="bjPlayerScore"></span></div>
          <div style="margin-top:8px"><strong>–î–∏–ª–µ—Ä:</strong> <span id="bjDealer" class="bj-hand">‚Äî</span> <span id="bjDealerScore"></span></div>
          <div id="bjResult" class="small" style="margin-top:8px"></div>
        </div>
      </div>

      <!-- DAILY -->
      <div id="daily" class="card" style="display:none">
        <div class="card-title">üéÅ –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –±–æ–Ω—É—Å</div>
        <div class="small">–ú–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å 1 —Ä–∞–∑ –≤ 24 —á–∞—Å–∞. –ë–æ–Ω—É—Å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: <strong>+100</strong> –º–æ–Ω–µ—Ç.</div>
        <div style="margin-top:10px" class="row">
          <button class="btn" id="claimDaily">–ü–æ–ª—É—á–∏—Ç—å –±–æ–Ω—É—Å</button>

<div id="dailyInfo" class="small" style="align-self:center">‚Äî</div>
        </div>
      </div>

      <!-- LOG -->
      <div id="log" class="card" style="display:none">
        <div class="card-title">üìú –ò—Å—Ç–æ—Ä–∏—è –¥–µ–π—Å—Ç–≤–∏–π</div>
        <div id="history" class="log">–ò—Å—Ç–æ—Ä–∏—è –ø—É—Å—Ç–∞.</div>
        <div style="margin-top:8px">
          <button class="btn secondary" id="clearHistory">–û—á–∏—Å—Ç–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é</button>
        </div>
      </div>

    </section>
  </main>

  <footer>–î–µ–º–æ-–≤–µ—Ä—Å–∏—è ‚Äî –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ –º–æ–Ω–µ—Ç—ã. –ù–∏–∫–∞–∫–∏—Ö —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–µ–Ω–µ–≥.</footer>
</div>

<script>
/*
  Simple client-side casino demo.
  State stored in localStorage:
   - username
   - balance (integer)
   - lastDaily (timestamp seconds)
   - history array
*/
(function(){
  // --- Config ---
  const STARTING = 200;
  const DAILY_BONUS_AMOUNT = 100;
  const SYMBOLS = ["üçí","üçã","‚≠ê","üîî","7Ô∏è‚É£"];
  const SLOT_JACK_MULT = 10; // —Ç—Ä–∏ –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö -> √ó10
  const SLOT_PAIR_REFUND = 0.5; // –¥–≤–µ –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ -> 50% –≤–æ–∑–≤—Ä–∞—Ç
  const BJ_BLACKJACK_MULT = 2.5; // blackjack payout
  // --- Helpers ---
  function $(id){ return document.getElementById(id); }
  function nowSec(){ return Math.floor(Date.now()/1000); }
  function saveState(key,val){ localStorage.setItem(key, JSON.stringify(val)); }
  function loadState(key, def){ const v=localStorage.getItem(key); return v?JSON.parse(v):def; }
  function addHistory(text){ const h=loadState('history',[]); h.unshift(`[${new Date().toLocaleString()}] ${text}`); saveState('history',h); renderHistory(); }
  function setBalance(v){ saveState('balance', v); renderBalance(); }
  function getBalance(){ return loadState('balance', STARTING); }
  function ensureUser(){ if(localStorage.getItem('balance')===null){ setBalance(STARTING); localStorage.setItem('lastDaily', JSON.stringify(0)); localStorage.setItem('history', JSON.stringify([])); } renderBalance(); renderHistory(); renderDailyInfo(); }

  // --- UI renderers ---
  function renderBalance(){ $('balance').textContent = getBalance(); }
  function renderHistory(){ const h=loadState('history',[]); const el=$('history'); if(!h.length){ el.textContent='–ò—Å—Ç–æ—Ä–∏—è –ø—É—Å—Ç–∞.'; } else { el.innerHTML = h.map(s=>'<div>'+escapeHtml(s)+'</div>').join(''); } }
  function escapeHtml(str){ return String(str).replaceAll('&','&amp;').replaceAll('<','&lt;').replaceAll('>','&gt;'); }

  // --- Menu switching ---
  document.querySelectorAll('.menu-btn').forEach(btn=>{
    btn.addEventListener('click', ()=> {
      document.querySelectorAll('.menu-btn').forEach(b=>b.classList.remove('active'));
      btn.classList.add('active');
      const target = btn.dataset.target;
      document.querySelectorAll('section > div.card').forEach(card=>card.style.display='none');
      const show = $(target);
      if(show) show.style.display='block';
    });
  });

  // profile popup
  $('profileBtn').addEventListener('click', ()=>{
    let name = loadState('username', '');
    const entered = prompt('–í–≤–µ–¥–∏—Ç–µ –∏–º—è (–æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ –ø—Ä–æ—Ñ–∏–ª–µ):', name || '');
    if(entered !== null){
      saveState('username', entered.trim());
      addHistory('–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ–±–Ω–æ–≤–∏–ª –ø—Ä–æ—Ñ–∏–ª—å: ' + (entered.trim()||'(–±–µ–∑ –∏–º–µ–Ω–∏)'));
      alert('–ü—Ä–æ—Ñ–∏–ª—å —Å–æ—Ö—Ä–∞–Ω—ë–Ω.');
    }
  });

  // --- SLOT logic ---
  function setReels(a,b,c){ $('r1').textContent=a; $('r2').textContent=b; $('r3').textContent=c; }
  $('spinBtn').addEventListener('click', ()=>{
    const bet = Math.max(1, Math.floor(Number($('slotBet').value) || 0));
    const balance = getBalance();
    if(bet <= 0){ alert('–°—Ç–∞–≤–∫–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å > 0'); return; }
    if(bet > balance){ alert('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–æ–Ω–µ—Ç'); return; }
    // take bet
    setBalance(balance - bet);
    addHistory(`–°–ª–æ—Ç: —Å—Ç–∞–≤–∫–∞ ${bet}`);

    // spin animation
    const spins = 18; // how many steps
    let step = 0;
    const interval = 60;
    const spinSymbols = SYMBOLS;
    const seq = [];
    const id = setInterval(()=>{
      const a = spinSymbols[Math.floor(Math.random()*spinSymbols.length)];
      const b = spinSymbols[Math.floor(Math.random()*spinSymbols.length)];
      const c = spinSymbols[Math.floor(Math.

random()*spinSymbols.length)];
      setReels(a,b,c);
      seq.push([a,b,c]);
      step++;
      if(step >= spins){
        clearInterval(id);
        const [ra,rb,rc] = seq[seq.length-1];
        // result
        let win = 0;
        if(ra === rb && rb === rc){
          win = bet * SLOT_JACK_MULT;
          addHistory(`–°–ª–æ—Ç: üéâ —Ç—Ä–∏ ${ra} ‚Äî –≤—ã–∏–≥—Ä—ã—à ${win}`);
        } else if(ra === rb  rb === rc  ra === rc){
          win = Math.floor(bet * SLOT_PAIR_REFUND);
          addHistory(`–°–ª–æ—Ç: –¥–≤–µ –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ ‚Äî –≤–æ–∑–≤—Ä–∞—â–µ–Ω–æ ${win}`);
        } else {
          win = 0;
          addHistory(`–°–ª–æ—Ç: –ø—Ä–æ–∏–≥—Ä—ã—à ${bet}`);
        }
        if(win) setBalance(getBalance() + win);
        renderBalance();
      }
    }, interval);
  });

  // --- ROULETTE ---
  const redSet = new Set([1,3,5,7,9,12,14,16,18,19,21,23,25,27,30,32,34,36]);
  function rouletteResolve(bet, choiceColor){
    const balance = getBalance();
    if(bet <=0 || isNaN(bet)){ alert('–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è —Å—Ç–∞–≤–∫–∞'); return; }
    if(bet > balance){ alert('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–æ–Ω–µ—Ç'); return; }
    setBalance(balance - bet);
    const num = Math.floor(Math.random()*37); // 0..36
    const color = (num === 0) ? '–∑–µ—Ä–æ' : (redSet.has(num) ? '–∫—Ä–∞—Å–Ω–æ–µ' : '—á—ë—Ä–Ω–æ–µ');
    let win = 0;
    if(choiceColor === color) win = bet * 2;
    if(win) setBalance(getBalance() + win);
    addHistory(`–†—É–ª–µ—Ç–∫–∞: —Å—Ç–∞–≤–∫–∞ ${bet} –Ω–∞ ${choiceColor}. –í—ã–ø–∞–ª–æ ${num} (${color}). –í—ã–∏–≥—Ä—ã—à ${win}`);
    $('rouletteResult').textContent = –í—ã–ø–∞–ª–æ: ${num} (${color}). ${win?('–í—ã –≤—ã–∏–≥—Ä–∞–ª–∏ '+win):'–í—ã –ø—Ä–æ–∏–≥—Ä–∞–ª–∏.'} –ë–∞–ª–∞–Ω—Å: ${getBalance()};
  }
  $('betRed').addEventListener('click', ()=> rouletteResolve(Math.max(1, Math.floor(Number($('rouletteBet').value)||0)),'–∫—Ä–∞—Å–Ω–æ–µ'));
  $('betBlack').addEventListener('click', ()=> rouletteResolve(Math.max(1, Math.floor(Number($('rouletteBet').value)||0)),'—á—ë—Ä–Ω–æ–µ'));

  // --- WHEEL ---
  const wheelMultipliers = [0,1,1,2,2,3,3,5,5,10,10,0];
  function spinWheel(bet){
    const balance = getBalance();
    if(bet <=0 || isNaN(bet)){ alert('–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è —Å—Ç–∞–≤–∫–∞'); return; }
    if(bet > balance){ alert('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–æ–Ω–µ—Ç'); return; }
    setBalance(balance - bet);
    // spin visual: rotate wheelDisc
    const disc = $('wheelDisc');
    const spins = 6; // full rotations
    const chosenIndex = Math.floor(Math.random()*wheelMultipliers.length);
    // each sector 360/12 = 30deg; we want pointer at top; pick rotation so chosen lands at top
    const sectorAngle = 360 / wheelMultipliers.length;
    const targetAngle = 360*spins + (360 - (chosenIndex * sectorAngle) - sectorAngle/2);
    disc.style.transition = 'transform 3s cubic-bezier(.12,.9,.26,1)';
    disc.style.transform = rotate(${targetAngle}deg);
    // after end
    setTimeout(()=>{
      // remove transition to allow next spin calculations (normalize transform)
      disc.style.transition = '';
      // compute multiplier
      const mult = wheelMultipliers[chosenIndex];
      const win = bet * mult;
      if(win) setBalance(getBalance() + win);
      addHistory(`–ö–æ–ª–µ—Å–æ: —Å—Ç–∞–≤–∫–∞ ${bet}, –º–Ω–æ–∂–∏—Ç–µ–ª—å √ó${mult}, –≤—ã–∏–≥—Ä—ã—à ${win}`);
      $('wheelResult').textContent = –ú–Ω–æ–∂–∏—Ç–µ–ª—å √ó${mult}. –í—ã–∏–≥—Ä—ã—à: ${win}. –ë–∞–ª–∞–Ω—Å: ${getBalance()};
      // set exact rotation in 0..360 to keep final position consistent
      const finalRotation = (targetAngle % 360);
      disc.style.transform = rotate(${finalRotation}deg);
    }, 3100);
  }
  $('wheelSpin').addEventListener('click', ()=> spinWheel(Math.max(1, Math.floor(Number($('wheelBet').value)||0))));

  // --- DAILY BONUS ---
  function renderDailyInfo(){
    const last = Number(loadState('lastDaily',0));
    const now = nowSec();
    const btn = $('claimDaily');
    const info = $('dailyInfo');
    if(now - last >= 86400){
      btn.disabled = false;
      info.textContent = –ë–æ–Ω—É—Å –¥–æ—Å—Ç—É–ø–µ–Ω: +${DAILY_BONUS_AMOUNT} –º–æ–Ω–µ—Ç;
    } else {
      btn.disabled = true;
      const left = 86400 - (now - last);
      const h = Math.floor(left/3600);
      const m = Math.floor((left%3600)/60);
      info.textContent = –°–ª–µ–¥—É—é—â–∏–π –±–æ–Ω—É—Å —á–µ—Ä–µ–∑ ${h}—á ${m}–º;
    }
  }
  $('claimDaily').addEventListener('click', ()=>{

const last = Number(loadState('lastDaily',0));
    const now = nowSec();
    if(now - last >= 86400){
      setBalance(getBalance() + DAILY_BONUS_AMOUNT);
      saveState('lastDaily', now);
      addHistory(`–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –±–æ–Ω—É—Å +${DAILY_BONUS_AMOUNT}`);
      alert(`–í—ã –ø–æ–ª—É—á–∏–ª–∏ +${DAILY_BONUS_AMOUNT} –º–æ–Ω–µ—Ç!`);
      renderDailyInfo();
    } else {
      alert('–ë–æ–Ω—É—Å –µ—â—ë –Ω–µ –¥–æ—Å—Ç—É–ø–µ–Ω.');
    }
  });

  // --- HISTORY clear ---
  $('clearHistory').addEventListener('click', ()=>{
    if(confirm('–û—á–∏—Å—Ç–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é?')){ saveState('history', []); renderHistory(); }
  });

  // --- BLACKJACK ---
  // Deck helpers
  function drawCard(){
    const faces = ["A","2","3","4","5","6","7","8","9","10","J","Q","K"];
    return faces[Math.floor(Math.random()*faces.length)];
  }
  function valueOf(card){
    if(card === "A") return 11;
    if(["J","Q","K"].includes(card)) return 10;
    return Number(card);
  }
  function calcHand(cards){
    let total = 0; let aces = 0;
    for(const c of cards){ total += valueOf(c); if(c==="A") aces++; }
    while(total > 21 && aces>0){ total -= 10; aces--; }
    return total;
  }
  // BJ state in-session
  let bjState = null; // {player:[], dealer:[], bet:int}
  function bjRender(){
    if(!bjState){ $('bjPlayer').textContent='‚Äî'; $('bjDealer').textContent='‚Äî'; $('bjPlayerScore').textContent=''; $('bjDealerScore').textContent=''; $('bjHit').style.display='none'; $('bjStand').style.display='none'; return; }
    $('bjPlayer').textContent = bjState.player.join(' ');
    $('bjDealer').textContent = bjState.dealer.join(' ');
    $('bjPlayerScore').textContent = = ${calcHand(bjState.player)};
    // hide dealer hole card: show only first if playing
    $('bjDealerScore').textContent = = ?;
    $('bjHit').style.display='inline-block'; $('bjStand').style.display='inline-block';
  }

  $('bjStart').addEventListener('click', ()=>{
    const bet = Math.max(1, Math.floor(Number($('bjBet').value)||0));
    if(bet <=0) { alert('–°—Ç–∞–≤–∫–∞ > 0'); return; }
    if(bet > getBalance()){ alert('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–æ–Ω–µ—Ç'); return; }
    setBalance(getBalance() - bet);
    // deal
    const player = [drawCard(), drawCard()];
    const dealer = [drawCard(), drawCard()];
    bjState = { player, dealer, bet };
    bjRender();
    $('bjResult').textContent = '–•–æ–¥ –∏–≥—Ä–æ–∫–∞.';
    addHistory(`–ë–ª—ç–∫–¥–∂–µ–∫: —Å—Ç–∞–≤–∫–∞ ${bet}. –ü–æ–ª—É—á–∏–ª–∏ –∫–∞—Ä—Ç—ã.`);
    // Check immediate blackjack
    const pVal = calcHand(player);
    const dVal = calcHand(dealer);
    if(pVal === 21){
      // player blackjack, immediate resolution
      let win = Math.floor(bet * BJ_BLACKJACK_MULT);
      // use Math.floor to keep integer coins
      setBalance(getBalance() + win);
      addHistory(`–ë–ª—ç–∫–¥–∂–µ–∫: –∏–≥—Ä–æ–∫ —Å–¥–µ–ª–∞–ª Blackjack! –í—ã–∏–≥—Ä—ã—à ${win}`);
      $('bjResult').textContent = –ë–ª—ç–∫–¥–∂–µ–∫! –í—ã –≤—ã–∏–≥—Ä–∞–ª–∏ ${win}. –ë–∞–ª–∞–Ω—Å: ${getBalance()};
      bjState = null;
      bjRender();
    }
  });

  $('bjHit').addEventListener('click', ()=>{
    if(!bjState) return;
    bjState.player.push(drawCard());
    const p = calcHand(bjState.player);
    bjRender();
    addHistory(`–ë–ª—ç–∫–¥–∂–µ–∫: –∏–≥—Ä–æ–∫ –≤–∑—è–ª –∫–∞—Ä—Ç—É (${bjState.player[bjState.player.length-1]}).`);
    if(p > 21){
      $('bjResult').textContent = –ü–µ—Ä–µ–±–æ—Ä ${p}. –í—ã –ø—Ä–æ–∏–≥—Ä–∞–ª–∏ —Å—Ç–∞–≤–∫—É ${bjState.bet}.;
      addHistory(`–ë–ª—ç–∫–¥–∂–µ–∫: –ø–µ—Ä–µ–±–æ—Ä ${p}, —Å—Ç–∞–≤–∫–∞ ${bjState.bet} –ø–æ—Ç–µ—Ä—è–Ω–∞.`);
      bjState = null;
      bjRender();
    } else {
      $('bjResult').textContent = –í–∞—à —Ö–æ–¥. –°—á—ë—Ç ${p}.;
    }
  });

  $('bjStand').addEventListener('click', ()=>{
    if(!bjState) return;
    // dealer draws until >=17
    while(calcHand(bjState.dealer) < 17){
      bjState.dealer.push(drawCard());
    }
    const p = calcHand(bjState.player);
    const d = calcHand(bjState.dealer);
    let win = 0;
    const bet = bjState.bet;
    if(p > 21){
      win = 0;
    } else if(d > 21 || p > d){
      win = bet * 2; // –ø–æ–±–µ–¥–∞
    } else if(p === d){
      win = bet; // –≤–æ–∑–≤—Ä–∞—Ç
    } else {
      win = 0;
    }
    // special: if player had blackjack earlier it was already handled on start
    // store integer coins (floor)
    win = Math.floor(win);

if(win) setBalance(getBalance() + win);
    addHistory(`–ë–ª—ç–∫–¥–∂–µ–∫: –∏—Ç–æ–≥ –∏–≥—Ä–æ–∫ ${p} vs –¥–∏–ª–µ—Ä ${d}. –í—ã–ø–ª–∞—Ç–∞ ${win}`);
    $('bjResult').textContent = –ò—Ç–æ–≥ ‚Äî –≤—ã ${win?('–≤—ã–∏–≥—Ä–∞–ª–∏ '+win): (p===d? '–Ω–∏—á—å—è, —Å—Ç–∞–≤–∫–∞ –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∞':'–ø—Ä–æ–∏–≥—Ä–∞–ª–∏')}. –ë–∞–ª–∞–Ω—Å: ${getBalance()};
    // reveal dealer
    $('bjDealer').textContent = bjState.dealer.join(' ');
    $('bjDealerScore').textContent = = ${d};
    bjState = null;
    bjRender();
  });

  // --- initial setup ---
  ensureUser();

  // restore wheel rotation initial (no transition)
  setTimeout(()=>{ $('wheelDisc').style.transform = 'rotate(0deg)'; }, 50);

  // render daily info periodically
  setInterval(renderDailyInfo, 1000);

  // show the first menu target explicitly (slot)
  document.querySelectorAll('.menu-btn').forEach(b=>{ if(b.dataset.target==='slot') b.click(); });

})();
</script>
</body>
</html>
